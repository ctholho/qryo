/*
 * ATTENTION: The "eval" devtool has been used (maybe by default in mode: "development").
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/businessLogic.js":
/*!******************************!*\
  !*** ./src/businessLogic.js ***!
  \******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"changePassword\": () => (/* binding */ changePassword),\n/* harmony export */   \"createAccount\": () => (/* binding */ createAccount),\n/* harmony export */   \"lock\": () => (/* binding */ lock),\n/* harmony export */   \"login\": () => (/* binding */ login),\n/* harmony export */   \"reset\": () => (/* binding */ reset)\n/* harmony export */ });\n/* harmony import */ var _akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @akronym/web-enc-at-rest */ \"../../packages/web-enc-at-rest/build/lib/index.mjs\");\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _regeneratorRuntime() { \"use strict\"; /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */ _regeneratorRuntime = function _regeneratorRuntime() { return exports; }; var exports = {}, Op = Object.prototype, hasOwn = Op.hasOwnProperty, defineProperty = Object.defineProperty || function (obj, key, desc) { obj[key] = desc.value; }, $Symbol = \"function\" == typeof Symbol ? Symbol : {}, iteratorSymbol = $Symbol.iterator || \"@@iterator\", asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\", toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\"; function define(obj, key, value) { return Object.defineProperty(obj, key, { value: value, enumerable: !0, configurable: !0, writable: !0 }), obj[key]; } try { define({}, \"\"); } catch (err) { define = function define(obj, key, value) { return obj[key] = value; }; } function wrap(innerFn, outerFn, self, tryLocsList) { var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator, generator = Object.create(protoGenerator.prototype), context = new Context(tryLocsList || []); return defineProperty(generator, \"_invoke\", { value: makeInvokeMethod(innerFn, self, context) }), generator; } function tryCatch(fn, obj, arg) { try { return { type: \"normal\", arg: fn.call(obj, arg) }; } catch (err) { return { type: \"throw\", arg: err }; } } exports.wrap = wrap; var ContinueSentinel = {}; function Generator() {} function GeneratorFunction() {} function GeneratorFunctionPrototype() {} var IteratorPrototype = {}; define(IteratorPrototype, iteratorSymbol, function () { return this; }); var getProto = Object.getPrototypeOf, NativeIteratorPrototype = getProto && getProto(getProto(values([]))); NativeIteratorPrototype && NativeIteratorPrototype !== Op && hasOwn.call(NativeIteratorPrototype, iteratorSymbol) && (IteratorPrototype = NativeIteratorPrototype); var Gp = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(IteratorPrototype); function defineIteratorMethods(prototype) { [\"next\", \"throw\", \"return\"].forEach(function (method) { define(prototype, method, function (arg) { return this._invoke(method, arg); }); }); } function AsyncIterator(generator, PromiseImpl) { function invoke(method, arg, resolve, reject) { var record = tryCatch(generator[method], generator, arg); if (\"throw\" !== record.type) { var result = record.arg, value = result.value; return value && \"object\" == _typeof(value) && hasOwn.call(value, \"__await\") ? PromiseImpl.resolve(value.__await).then(function (value) { invoke(\"next\", value, resolve, reject); }, function (err) { invoke(\"throw\", err, resolve, reject); }) : PromiseImpl.resolve(value).then(function (unwrapped) { result.value = unwrapped, resolve(result); }, function (error) { return invoke(\"throw\", error, resolve, reject); }); } reject(record.arg); } var previousPromise; defineProperty(this, \"_invoke\", { value: function value(method, arg) { function callInvokeWithMethodAndArg() { return new PromiseImpl(function (resolve, reject) { invoke(method, arg, resolve, reject); }); } return previousPromise = previousPromise ? previousPromise.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg(); } }); } function makeInvokeMethod(innerFn, self, context) { var state = \"suspendedStart\"; return function (method, arg) { if (\"executing\" === state) throw new Error(\"Generator is already running\"); if (\"completed\" === state) { if (\"throw\" === method) throw arg; return doneResult(); } for (context.method = method, context.arg = arg;;) { var delegate = context.delegate; if (delegate) { var delegateResult = maybeInvokeDelegate(delegate, context); if (delegateResult) { if (delegateResult === ContinueSentinel) continue; return delegateResult; } } if (\"next\" === context.method) context.sent = context._sent = context.arg;else if (\"throw\" === context.method) { if (\"suspendedStart\" === state) throw state = \"completed\", context.arg; context.dispatchException(context.arg); } else \"return\" === context.method && context.abrupt(\"return\", context.arg); state = \"executing\"; var record = tryCatch(innerFn, self, context); if (\"normal\" === record.type) { if (state = context.done ? \"completed\" : \"suspendedYield\", record.arg === ContinueSentinel) continue; return { value: record.arg, done: context.done }; } \"throw\" === record.type && (state = \"completed\", context.method = \"throw\", context.arg = record.arg); } }; } function maybeInvokeDelegate(delegate, context) { var methodName = context.method, method = delegate.iterator[methodName]; if (undefined === method) return context.delegate = null, \"throw\" === methodName && delegate.iterator[\"return\"] && (context.method = \"return\", context.arg = undefined, maybeInvokeDelegate(delegate, context), \"throw\" === context.method) || \"return\" !== methodName && (context.method = \"throw\", context.arg = new TypeError(\"The iterator does not provide a '\" + methodName + \"' method\")), ContinueSentinel; var record = tryCatch(method, delegate.iterator, context.arg); if (\"throw\" === record.type) return context.method = \"throw\", context.arg = record.arg, context.delegate = null, ContinueSentinel; var info = record.arg; return info ? info.done ? (context[delegate.resultName] = info.value, context.next = delegate.nextLoc, \"return\" !== context.method && (context.method = \"next\", context.arg = undefined), context.delegate = null, ContinueSentinel) : info : (context.method = \"throw\", context.arg = new TypeError(\"iterator result is not an object\"), context.delegate = null, ContinueSentinel); } function pushTryEntry(locs) { var entry = { tryLoc: locs[0] }; 1 in locs && (entry.catchLoc = locs[1]), 2 in locs && (entry.finallyLoc = locs[2], entry.afterLoc = locs[3]), this.tryEntries.push(entry); } function resetTryEntry(entry) { var record = entry.completion || {}; record.type = \"normal\", delete record.arg, entry.completion = record; } function Context(tryLocsList) { this.tryEntries = [{ tryLoc: \"root\" }], tryLocsList.forEach(pushTryEntry, this), this.reset(!0); } function values(iterable) { if (iterable) { var iteratorMethod = iterable[iteratorSymbol]; if (iteratorMethod) return iteratorMethod.call(iterable); if (\"function\" == typeof iterable.next) return iterable; if (!isNaN(iterable.length)) { var i = -1, next = function next() { for (; ++i < iterable.length;) if (hasOwn.call(iterable, i)) return next.value = iterable[i], next.done = !1, next; return next.value = undefined, next.done = !0, next; }; return next.next = next; } } return { next: doneResult }; } function doneResult() { return { value: undefined, done: !0 }; } return GeneratorFunction.prototype = GeneratorFunctionPrototype, defineProperty(Gp, \"constructor\", { value: GeneratorFunctionPrototype, configurable: !0 }), defineProperty(GeneratorFunctionPrototype, \"constructor\", { value: GeneratorFunction, configurable: !0 }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, toStringTagSymbol, \"GeneratorFunction\"), exports.isGeneratorFunction = function (genFun) { var ctor = \"function\" == typeof genFun && genFun.constructor; return !!ctor && (ctor === GeneratorFunction || \"GeneratorFunction\" === (ctor.displayName || ctor.name)); }, exports.mark = function (genFun) { return Object.setPrototypeOf ? Object.setPrototypeOf(genFun, GeneratorFunctionPrototype) : (genFun.__proto__ = GeneratorFunctionPrototype, define(genFun, toStringTagSymbol, \"GeneratorFunction\")), genFun.prototype = Object.create(Gp), genFun; }, exports.awrap = function (arg) { return { __await: arg }; }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, asyncIteratorSymbol, function () { return this; }), exports.AsyncIterator = AsyncIterator, exports.async = function (innerFn, outerFn, self, tryLocsList, PromiseImpl) { void 0 === PromiseImpl && (PromiseImpl = Promise); var iter = new AsyncIterator(wrap(innerFn, outerFn, self, tryLocsList), PromiseImpl); return exports.isGeneratorFunction(outerFn) ? iter : iter.next().then(function (result) { return result.done ? result.value : iter.next(); }); }, defineIteratorMethods(Gp), define(Gp, toStringTagSymbol, \"Generator\"), define(Gp, iteratorSymbol, function () { return this; }), define(Gp, \"toString\", function () { return \"[object Generator]\"; }), exports.keys = function (val) { var object = Object(val), keys = []; for (var key in object) keys.push(key); return keys.reverse(), function next() { for (; keys.length;) { var key = keys.pop(); if (key in object) return next.value = key, next.done = !1, next; } return next.done = !0, next; }; }, exports.values = values, Context.prototype = { constructor: Context, reset: function reset(skipTempReset) { if (this.prev = 0, this.next = 0, this.sent = this._sent = undefined, this.done = !1, this.delegate = null, this.method = \"next\", this.arg = undefined, this.tryEntries.forEach(resetTryEntry), !skipTempReset) for (var name in this) \"t\" === name.charAt(0) && hasOwn.call(this, name) && !isNaN(+name.slice(1)) && (this[name] = undefined); }, stop: function stop() { this.done = !0; var rootRecord = this.tryEntries[0].completion; if (\"throw\" === rootRecord.type) throw rootRecord.arg; return this.rval; }, dispatchException: function dispatchException(exception) { if (this.done) throw exception; var context = this; function handle(loc, caught) { return record.type = \"throw\", record.arg = exception, context.next = loc, caught && (context.method = \"next\", context.arg = undefined), !!caught; } for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i], record = entry.completion; if (\"root\" === entry.tryLoc) return handle(\"end\"); if (entry.tryLoc <= this.prev) { var hasCatch = hasOwn.call(entry, \"catchLoc\"), hasFinally = hasOwn.call(entry, \"finallyLoc\"); if (hasCatch && hasFinally) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } else if (hasCatch) { if (this.prev < entry.catchLoc) return handle(entry.catchLoc, !0); } else { if (!hasFinally) throw new Error(\"try statement without catch or finally\"); if (this.prev < entry.finallyLoc) return handle(entry.finallyLoc); } } } }, abrupt: function abrupt(type, arg) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc <= this.prev && hasOwn.call(entry, \"finallyLoc\") && this.prev < entry.finallyLoc) { var finallyEntry = entry; break; } } finallyEntry && (\"break\" === type || \"continue\" === type) && finallyEntry.tryLoc <= arg && arg <= finallyEntry.finallyLoc && (finallyEntry = null); var record = finallyEntry ? finallyEntry.completion : {}; return record.type = type, record.arg = arg, finallyEntry ? (this.method = \"next\", this.next = finallyEntry.finallyLoc, ContinueSentinel) : this.complete(record); }, complete: function complete(record, afterLoc) { if (\"throw\" === record.type) throw record.arg; return \"break\" === record.type || \"continue\" === record.type ? this.next = record.arg : \"return\" === record.type ? (this.rval = this.arg = record.arg, this.method = \"return\", this.next = \"end\") : \"normal\" === record.type && afterLoc && (this.next = afterLoc), ContinueSentinel; }, finish: function finish(finallyLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.finallyLoc === finallyLoc) return this.complete(entry.completion, entry.afterLoc), resetTryEntry(entry), ContinueSentinel; } }, \"catch\": function _catch(tryLoc) { for (var i = this.tryEntries.length - 1; i >= 0; --i) { var entry = this.tryEntries[i]; if (entry.tryLoc === tryLoc) { var record = entry.completion; if (\"throw\" === record.type) { var thrown = record.arg; resetTryEntry(entry); } return thrown; } } throw new Error(\"illegal catch attempt\"); }, delegateYield: function delegateYield(iterable, resultName, nextLoc) { return this.delegate = { iterator: values(iterable), resultName: resultName, nextLoc: nextLoc }, \"next\" === this.method && (this.arg = undefined), ContinueSentinel; } }, exports; }\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }\nfunction _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err); } _next(undefined); }); }; }\n\nvar UNEXPECTED_ERROR_MESSAGE = 'An unexpected error occurred.';\nvar DEFAULT_SECRET_TEXT = 'I am terrified of clowns. Not all of them. Just the ones that disguise themselves as normal people.';\nvar SECRET_TEXT_KEY = 'WEAR_EXAMPLE_SECRET';\nvar context = null;\nfunction _createValidationResult(failReasons) {\n  return failReasons.length ? \"Please correct the following: \".concat(failReasons.join(', '), \".\") : null;\n}\nfunction _validateCreateAccount(userName, password, confirmPassword) {\n  var failReasons = [];\n  if (!userName) failReasons.push('user name is missing');\n  if (!password) failReasons.push('password is missing');\n  if (!confirmPassword) failReasons.push('confirm password is missing');\n  if (password && confirmPassword && password !== confirmPassword) failReasons.push('confirm password does not match');\n  return _createValidationResult(failReasons);\n}\nfunction _validateChangePassword(userName, oldPassword, newPassword, confirmPassword) {\n  var failReasons = [];\n  if (!userName) failReasons.push('user name is missing');\n  if (!oldPassword) failReasons.push('old password is missing');\n  if (!newPassword) failReasons.push('new password is missing');\n  if (!confirmPassword) failReasons.push('confirm password is missing');\n  if (newPassword && confirmPassword && newPassword !== confirmPassword) failReasons.push('confirm password does not match');\n  return _createValidationResult(failReasons);\n}\nfunction _setSecretText(_x) {\n  return _setSecretText2.apply(this, arguments);\n}\nfunction _setSecretText2() {\n  _setSecretText2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(text) {\n    var encrypted;\n    return _regeneratorRuntime().wrap(function _callee$(_context) {\n      while (1) switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.encryptObject)(context, {\n            text: text\n          });\n        case 2:\n          encrypted = _context.sent;\n          localStorage.setItem(SECRET_TEXT_KEY, encrypted);\n        case 4:\n        case \"end\":\n          return _context.stop();\n      }\n    }, _callee);\n  }));\n  return _setSecretText2.apply(this, arguments);\n}\nfunction _getSecretText() {\n  return _getSecretText2.apply(this, arguments);\n}\nfunction _getSecretText2() {\n  _getSecretText2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n    var encrypted, _yield$decryptObject, text;\n    return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n      while (1) switch (_context2.prev = _context2.next) {\n        case 0:\n          encrypted = localStorage.getItem(SECRET_TEXT_KEY);\n          if (!(encrypted === null)) {\n            _context2.next = 3;\n            break;\n          }\n          return _context2.abrupt(\"return\", DEFAULT_SECRET_TEXT);\n        case 3:\n          _context2.next = 5;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.decryptObject)(context, encrypted);\n        case 5:\n          _yield$decryptObject = _context2.sent;\n          text = _yield$decryptObject.text;\n          return _context2.abrupt(\"return\", text);\n        case 8:\n        case \"end\":\n          return _context2.stop();\n      }\n    }, _callee2);\n  }));\n  return _getSecretText2.apply(this, arguments);\n}\nfunction _deleteSecretText() {\n  localStorage.removeItem(SECRET_TEXT_KEY);\n}\nfunction createAccount(_x2, _x3, _x4) {\n  return _createAccount.apply(this, arguments);\n}\nfunction _createAccount() {\n  _createAccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(userName, password, confirmPassword) {\n    var message, secretText;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          _context3.prev = 0;\n          message = _validateCreateAccount(userName, password, confirmPassword);\n          if (!message) {\n            _context3.next = 4;\n            break;\n          }\n          return _context3.abrupt(\"return\", {\n            success: false,\n            message: message\n          });\n        case 4:\n          _context3.next = 6;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.open)(userName, password);\n        case 6:\n          context = _context3.sent;\n          console.log('hahaha', context);\n          if (context) {\n            _context3.next = 10;\n            break;\n          }\n          return _context3.abrupt(\"return\", {\n            success: false,\n            message: UNEXPECTED_ERROR_MESSAGE\n          });\n        case 10:\n          secretText = DEFAULT_SECRET_TEXT;\n          _context3.next = 13;\n          return _setSecretText(secretText);\n        case 13:\n          return _context3.abrupt(\"return\", {\n            success: true,\n            secretText: secretText\n          });\n        case 16:\n          _context3.prev = 16;\n          _context3.t0 = _context3[\"catch\"](0);\n          console.error(_context3.t0);\n          return _context3.abrupt(\"return\", {\n            success: false,\n            message: UNEXPECTED_ERROR_MESSAGE\n          });\n        case 20:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3, null, [[0, 16]]);\n  }));\n  return _createAccount.apply(this, arguments);\n}\nfunction _validateLogin(userName, password) {\n  var failReasons = [];\n  if (!userName) failReasons.push('user name is missing');\n  if (!password) failReasons.push('password is missing');\n  return _createValidationResult(failReasons);\n}\nfunction login(_x5, _x6) {\n  return _login.apply(this, arguments);\n}\nfunction _login() {\n  _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(userName, password) {\n    var message, secretText;\n    return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n      while (1) switch (_context4.prev = _context4.next) {\n        case 0:\n          _context4.prev = 0;\n          message = _validateLogin(userName, password);\n          if (!message) {\n            _context4.next = 4;\n            break;\n          }\n          return _context4.abrupt(\"return\", {\n            success: false,\n            message: message\n          });\n        case 4:\n          _context4.next = 6;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.open)(userName, password);\n        case 6:\n          context = _context4.sent;\n          console.log('hahaha', context);\n          if (context) {\n            _context4.next = 10;\n            break;\n          }\n          return _context4.abrupt(\"return\", {\n            success: false,\n            message: 'Credentials did not match previously-provided values.'\n          });\n        case 10:\n          _context4.next = 12;\n          return _getSecretText();\n        case 12:\n          secretText = _context4.sent;\n          return _context4.abrupt(\"return\", {\n            success: true,\n            secretText: secretText\n          });\n        case 16:\n          _context4.prev = 16;\n          _context4.t0 = _context4[\"catch\"](0);\n          console.error(_context4.t0);\n          return _context4.abrupt(\"return\", {\n            success: false,\n            message: UNEXPECTED_ERROR_MESSAGE\n          });\n        case 20:\n        case \"end\":\n          return _context4.stop();\n      }\n    }, _callee4, null, [[0, 16]]);\n  }));\n  return _login.apply(this, arguments);\n}\nfunction lock(_x7) {\n  return _lock.apply(this, arguments);\n}\nfunction _lock() {\n  _lock = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(secretText) {\n    return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n      while (1) switch (_context5.prev = _context5.next) {\n        case 0:\n          _context5.prev = 0;\n          _context5.next = 3;\n          return _setSecretText(secretText);\n        case 3:\n          (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.close)(context);\n          return _context5.abrupt(\"return\", {\n            success: true\n          });\n        case 7:\n          _context5.prev = 7;\n          _context5.t0 = _context5[\"catch\"](0);\n          console.error(_context5.t0);\n          return _context5.abrupt(\"return\", {\n            success: false,\n            message: UNEXPECTED_ERROR_MESSAGE\n          });\n        case 11:\n        case \"end\":\n          return _context5.stop();\n      }\n    }, _callee5, null, [[0, 7]]);\n  }));\n  return _lock.apply(this, arguments);\n}\nfunction reset() {\n  return _reset.apply(this, arguments);\n}\nfunction _reset() {\n  _reset = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6() {\n    return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n      while (1) switch (_context6.prev = _context6.next) {\n        case 0:\n          _deleteSecretText();\n          (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.dangerouslyDeInitialize)();\n        case 2:\n        case \"end\":\n          return _context6.stop();\n      }\n    }, _callee6);\n  }));\n  return _reset.apply(this, arguments);\n}\nfunction _onReEncrypt(_x8, _x9) {\n  return _onReEncrypt2.apply(this, arguments);\n}\nfunction _onReEncrypt2() {\n  _onReEncrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(oldContext, newContext) {\n    var oldEncryptedSecret, plainTextSecret, newEncryptedSecret;\n    return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n      while (1) switch (_context7.prev = _context7.next) {\n        case 0:\n          oldEncryptedSecret = localStorage.getItem(SECRET_TEXT_KEY);\n          _context7.prev = 1;\n          _context7.next = 4;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.decryptObject)(oldContext, oldEncryptedSecret);\n        case 4:\n          plainTextSecret = _context7.sent;\n          _context7.next = 7;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.encryptObject)(newContext, plainTextSecret);\n        case 7:\n          newEncryptedSecret = _context7.sent;\n          localStorage.setItem(SECRET_TEXT_KEY, newEncryptedSecret);\n          return _context7.abrupt(\"return\", true);\n        case 12:\n          _context7.prev = 12;\n          _context7.t0 = _context7[\"catch\"](1);\n          // Roll back for errors.\n          console.error(_context7.t0);\n          localStorage.setItem(SECRET_TEXT_KEY, oldEncryptedSecret);\n          return _context7.abrupt(\"return\", false);\n        case 17:\n        case \"end\":\n          return _context7.stop();\n      }\n    }, _callee7, null, [[1, 12]]);\n  }));\n  return _onReEncrypt2.apply(this, arguments);\n}\nfunction changePassword(_x10, _x11, _x12, _x13) {\n  return _changePassword.apply(this, arguments);\n}\nfunction _changePassword() {\n  _changePassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(userName, oldPassword, newPassword, confirmPassword) {\n    var message, oldContext;\n    return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n      while (1) switch (_context8.prev = _context8.next) {\n        case 0:\n          _context8.prev = 0;\n          message = _validateChangePassword(userName, oldPassword, newPassword, confirmPassword);\n          if (!message) {\n            _context8.next = 4;\n            break;\n          }\n          return _context8.abrupt(\"return\", {\n            success: false,\n            message: message\n          });\n        case 4:\n          _context8.next = 6;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.open)(userName, oldPassword);\n        case 6:\n          oldContext = _context8.sent;\n          if (oldContext) {\n            _context8.next = 9;\n            break;\n          }\n          return _context8.abrupt(\"return\", {\n            success: false,\n            message: 'Old password does not match previously-provided credentials.'\n          });\n        case 9:\n          _context8.next = 11;\n          return (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_0__.changeCredentialsAndReEncrypt)(oldContext, userName, newPassword, _onReEncrypt);\n        case 11:\n          context = _context8.sent;\n          if (!(context === null)) {\n            _context8.next = 14;\n            break;\n          }\n          return _context8.abrupt(\"return\", {\n            success: false,\n            message: 'An error occurred during re-encryption. No changes have been made.'\n          });\n        case 14:\n          return _context8.abrupt(\"return\", {\n            success: true\n          });\n        case 17:\n          _context8.prev = 17;\n          _context8.t0 = _context8[\"catch\"](0);\n          console.error(_context8.t0);\n          return _context8.abrupt(\"return\", {\n            success: false,\n            message: UNEXPECTED_ERROR_MESSAGE\n          });\n        case 21:\n        case \"end\":\n          return _context8.stop();\n      }\n    }, _callee8, null, [[0, 17]]);\n  }));\n  return _changePassword.apply(this, arguments);\n}\n\n//# sourceURL=webpack://example/./src/businessLogic.js?");

/***/ }),

/***/ "./src/domUtil.js":
/*!************************!*\
  !*** ./src/domUtil.js ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"bindOnClick\": () => (/* binding */ bindOnClick),\n/* harmony export */   \"hideElement\": () => (/* binding */ hideElement),\n/* harmony export */   \"setInnerText\": () => (/* binding */ setInnerText),\n/* harmony export */   \"setValue\": () => (/* binding */ setValue),\n/* harmony export */   \"showElement\": () => (/* binding */ showElement),\n/* harmony export */   \"valueOf\": () => (/* binding */ valueOf)\n/* harmony export */ });\nfunction hideElement(id) {\n  var element = document.getElementById(id);\n  if (element.classList.contains('hidden')) return;\n  element.className = (element.className + ' hidden').trim();\n}\nfunction showElement(id) {\n  var element = document.getElementById(id);\n  element.className = element.className.split(' ').filter(function (className) {\n    return className !== 'hidden';\n  }).join(' ');\n}\nfunction bindOnClick(id, onClick) {\n  var element = document.getElementById(id);\n  element === null || element === void 0 ? void 0 : element.addEventListener('click', onClick);\n}\nfunction valueOf(id) {\n  var _document$getElementB;\n  return (_document$getElementB = document.getElementById(id)) === null || _document$getElementB === void 0 ? void 0 : _document$getElementB.value;\n}\nfunction setValue(id, text) {\n  var element = document.getElementById(id);\n  if (element) element.value = text;\n}\nfunction setInnerText(id, text) {\n  var element = document.getElementById(id);\n  if (element) element.innerText = text;\n}\n\n//# sourceURL=webpack://example/./src/domUtil.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @akronym/web-enc-at-rest */ \"../../packages/web-enc-at-rest/build/lib/index.mjs\");\n/* harmony import */ var _domUtil__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./domUtil */ \"./src/domUtil.js\");\n/* harmony import */ var _businessLogic__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./businessLogic */ \"./src/businessLogic.js\");\n\n\n\nvar LOGIN = 0,\n  FORGOT = 1,\n  CREATE_ACCOUNT = 2,\n  CHANGE_PW = 3,\n  POST_LOGIN = 4;\nvar panels = ['loginPanel', 'forgotPanel', 'createAccountPanel', 'changePasswordPanel', 'postLoginPanel'];\nvar lastUserName;\nfunction _showCurrentPanel(showPanelNo) {\n  for (var panelNo = 0; panelNo < panels.length; ++panelNo) {\n    var panelId = panels[panelNo];\n    if (panelNo === showPanelNo) {\n      (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.showElement)(panelId);\n    } else {\n      (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.hideElement)(panelId);\n    }\n  }\n}\nfunction _showStatusMessage(message) {\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setInnerText)('statusMessage', message);\n}\nfunction _clearStatusMessage() {\n  _showStatusMessage('');\n}\nfunction _clearUserNameAndPassword() {\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('loginUserName', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('loginPassword', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('createAccountUserName', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('createAccountPassword', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('createAccountPassword2', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('oldPassword', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('newPassword', '');\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('newPassword2', '');\n}\nfunction _onCreateAccountButtonClick() {\n  _clearStatusMessage();\n  lastUserName = (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('createAccountUserName');\n  (0,_businessLogic__WEBPACK_IMPORTED_MODULE_1__.createAccount)(lastUserName, (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('createAccountPassword'), (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('createAccountPassword2')).then(function (result) {\n    if (!result.success) {\n      _showStatusMessage(result.message);\n      return;\n    }\n    (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('preciousSecretsText', result.secretText);\n    _clearUserNameAndPassword();\n    _showCurrentPanel(POST_LOGIN);\n  });\n}\nfunction _onLoginButtonClick() {\n  _clearStatusMessage();\n  lastUserName = (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('loginUserName');\n  (0,_businessLogic__WEBPACK_IMPORTED_MODULE_1__.login)(lastUserName, (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('loginPassword')).then(function (result) {\n    if (!result.success) {\n      _showStatusMessage(result.message);\n      return;\n    }\n    (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('preciousSecretsText', result.secretText);\n    _clearUserNameAndPassword();\n    _showCurrentPanel(POST_LOGIN);\n  });\n}\nfunction _onLockButtonClick() {\n  _clearStatusMessage();\n  (0,_businessLogic__WEBPACK_IMPORTED_MODULE_1__.lock)((0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('preciousSecretsText')).then(function (result) {\n    if (!result.success) {\n      _showStatusMessage(result.message);\n      return;\n    }\n    (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('preciousSecretsText', '');\n    _showCurrentPanel(LOGIN);\n  });\n}\nfunction _onResetButtonClick() {\n  _clearStatusMessage();\n  (0,_businessLogic__WEBPACK_IMPORTED_MODULE_1__.reset)().then(function () {\n    _showStatusMessage('Account successfully reset.');\n    _showCurrentPanel(CREATE_ACCOUNT);\n  });\n}\nfunction _onResetCancelButtonClick() {\n  _clearStatusMessage();\n  _showCurrentPanel(LOGIN);\n}\nfunction _onForgotButtonClick() {\n  _clearStatusMessage();\n  _showCurrentPanel(FORGOT);\n}\nfunction _onChangePasswordClick() {\n  _clearStatusMessage();\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.setValue)('oldUsername', lastUserName);\n  _showCurrentPanel(CHANGE_PW);\n}\nfunction _onConfirmChangePasswordClick() {\n  _clearStatusMessage();\n  (0,_businessLogic__WEBPACK_IMPORTED_MODULE_1__.changePassword)(lastUserName, (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('oldPassword'), (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('newPassword'), (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.valueOf)('newPassword2')).then(function (result) {\n    if (!result.success) {\n      _showStatusMessage(result.message);\n      return;\n    }\n    _clearUserNameAndPassword();\n    _showStatusMessage('Password successfully changed.');\n    _showCurrentPanel(POST_LOGIN);\n  });\n}\nfunction _onCancelChangePasswordClick() {\n  _clearStatusMessage();\n  _clearUserNameAndPassword();\n  _showCurrentPanel(POST_LOGIN);\n}\nfunction _bindEvents() {\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('createAccountButton', _onCreateAccountButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('loginButton', _onLoginButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('lockButton', _onLockButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('forgotButton', _onForgotButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('resetButton', _onResetButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('resetCancelButton', _onResetCancelButtonClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('changePasswordButton', _onChangePasswordClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('confirmChangePasswordButton', _onConfirmChangePasswordClick);\n  (0,_domUtil__WEBPACK_IMPORTED_MODULE_0__.bindOnClick)('cancelChangePasswordButton', _onCancelChangePasswordClick);\n}\nfunction _init() {\n  _bindEvents();\n  var showPanelNo = (0,_akronym_web_enc_at_rest__WEBPACK_IMPORTED_MODULE_2__.isInitialized)() ? LOGIN : CREATE_ACCOUNT;\n  _showCurrentPanel(showPanelNo);\n}\n_init();\n\n//# sourceURL=webpack://example/./src/index.js?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/WearContext.mjs":
/*!****************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/WearContext.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ WearContext$1)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n/** @class WearContext \n *  Encapsulates all state needed for API usage, including the credential-derived key used for encryption/decryption.\n *  Only keep this instance in memory. Or in other words, don't store it or data retrieved from the instance in any \n *  form of persistent storage, e.g. LocalStorage, SessionStorage, WebSQL, IndexedDb, querystring params (browser history).\n */\nclass WearContext {\n  // Did you call JSON.stringify()? I'm guessing you're trying to serialize the context, which implies some other uses that will be insecure.\n\n  constructor(key) {\n    this._key = key;\n    this._preventSerialization = this;\n  }\n\n  /** Method intended for internal usage only. If you retrieve the key for app usage, you should plan to think very \n   *  carefully about what vulnerabilities you'll be introducing.\n   *  \n   *  @return {CryptoKey} A CryptoKey usable for encryption/decryption or null if the context has been cleared.\n   */\n  dangerouslyGetKey() {\n    return this._key;\n  }\n\n  /** Has this context been cleared?\n   * \n   * @return {boolean} True, if it has. False, if not. */\n  isClear() {\n    return this._key === null;\n  }\n\n  /** Clear all data in the context, which disables the context for use in calling WEaR APIs and prevents the\n   *  context data from being accessed by Javascript.\n   */\n  clear() {\n    this._key = null;\n  }\n}\nvar WearContext$1 = WearContext;\n\n\n//# sourceMappingURL=WearContext.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/WearContext.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs":
/*!***************************************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs ***!
  \***************************************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"asyncToGenerator\": () => (/* binding */ _asyncToGenerator)\n/* harmony export */ });\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n      _next(undefined);\n    });\n  };\n}\n\n\n//# sourceMappingURL=_rollupPluginBabelHelpers.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/appDataEncryption.mjs":
/*!**********************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/appDataEncryption.mjs ***!
  \**********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"decryptAppData\": () => (/* binding */ decryptAppData),\n/* harmony export */   \"encryptAppData\": () => (/* binding */ encryptAppData)\n/* harmony export */ });\n/* harmony import */ var _virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./_virtual/_rollupPluginBabelHelpers.mjs */ \"../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs\");\n/* harmony import */ var _protectedCrypto_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./protectedCrypto.mjs */ \"../../packages/web-enc-at-rest/build/lib/protectedCrypto.mjs\");\n/* harmony import */ var _randomUtil_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./randomUtil.mjs */ \"../../packages/web-enc-at-rest/build/lib/randomUtil.mjs\");\n\n\n\n\nvar AES_GCM_IV_LENGTH = 12;\nfunction encryptAppData(_x, _x2) {\n  return _encryptAppData.apply(this, arguments);\n}\nfunction _encryptAppData() {\n  _encryptAppData = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.asyncToGenerator)(function* (credentialKey, data) {\n    var subtle = (0,_protectedCrypto_mjs__WEBPACK_IMPORTED_MODULE_1__.getSubtle)();\n    var iv = (0,_randomUtil_mjs__WEBPACK_IMPORTED_MODULE_2__.randomBytes)(AES_GCM_IV_LENGTH);\n    var algorithmParams = {\n      name: 'AES-GCM',\n      iv\n    };\n    var cipherText = yield subtle.encrypt(algorithmParams, credentialKey, data);\n    var fullMessage = new Uint8Array(AES_GCM_IV_LENGTH + cipherText.byteLength);\n    fullMessage.set(iv);\n    fullMessage.set(new Uint8Array(cipherText), AES_GCM_IV_LENGTH);\n    return fullMessage;\n  });\n  return _encryptAppData.apply(this, arguments);\n}\nfunction decryptAppData(_x3, _x4) {\n  return _decryptAppData.apply(this, arguments);\n}\nfunction _decryptAppData() {\n  _decryptAppData = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_0__.asyncToGenerator)(function* (credentialKey, ivPlusEncryptedData) {\n    var subtle = (0,_protectedCrypto_mjs__WEBPACK_IMPORTED_MODULE_1__.getSubtle)();\n    var iv = ivPlusEncryptedData.slice(0, AES_GCM_IV_LENGTH);\n    var cipherText = ivPlusEncryptedData.slice(AES_GCM_IV_LENGTH);\n    var algorithmParams = {\n      name: 'AES-GCM',\n      iv\n    };\n    var plainText = yield subtle.decrypt(algorithmParams, credentialKey, cipherText);\n    return new Uint8Array(plainText);\n  });\n  return _decryptAppData.apply(this, arguments);\n}\n\n\n//# sourceMappingURL=appDataEncryption.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/appDataEncryption.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/arrayUtil.mjs":
/*!**************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/arrayUtil.mjs ***!
  \**************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"areUint8ArraysEqual\": () => (/* binding */ areUint8ArraysEqual)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nfunction areUint8ArraysEqual(a, b) {\n  if (a.length != b.length) return false;\n  for (var i = 0; i < a.length; ++i) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\n\n//# sourceMappingURL=arrayUtil.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/arrayUtil.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/base64Util.mjs":
/*!***************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/base64Util.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"base64ToBytes\": () => (/* binding */ base64ToBytes),\n/* harmony export */   \"bytesToBase64\": () => (/* binding */ bytesToBase64)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nfunction bytesToBase64(array) {\n  return globalThis.btoa(String.fromCharCode(...array));\n}\nfunction base64ToBytes(base64) {\n  var asciiString = globalThis.atob(base64);\n  return new Uint8Array([...asciiString].map(char => char.charCodeAt(0)));\n}\n\n\n//# sourceMappingURL=base64Util.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/base64Util.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/dataConvertUtil.mjs":
/*!********************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/dataConvertUtil.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"anyToBytes\": () => (/* binding */ anyToBytes),\n/* harmony export */   \"anyToString\": () => (/* binding */ anyToString),\n/* harmony export */   \"bytesToAny\": () => (/* binding */ bytesToAny),\n/* harmony export */   \"bytesToString\": () => (/* binding */ bytesToString),\n/* harmony export */   \"stringToBytes\": () => (/* binding */ stringToBytes)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nvar textEncoder = new TextEncoder();\nfunction stringToBytes(text) {\n  return textEncoder.encode(text);\n}\nvar textDecoder = new TextDecoder();\nfunction bytesToString(utf8Array) {\n  return textDecoder.decode(utf8Array);\n}\n\n/* The purpose of the replacement table is to fix some primitive values that otherwise would not survive JSON.stringify(JSON.parse()) (de)serialization.\n   I would love to include \"undefined\" below too, but on the JSON.parse() execution, an \"undefined\" value will always omit the the variable from \n   the parse. You could avoid serializing variables with undefined values, e.g. { x:undefined }. Or you could use (de)serialization other than JSON.*.\n   \n    = an escaping prefix that is very unlikely to be part of the passed in data. */\nvar replacementTable = [[Infinity, 'infinity'], [-Infinity, '-infinity'], [NaN, 'NaN']];\nfunction _replacePrimitiveValues(value) {\n  if (Number.isNaN(value)) return 'NaN'; // === comparison below won't work.\n  for (var i = 0; i < replacementTable.length; ++i) {\n    // @ts-ignore\n    if (replacementTable[i][0] === value) return replacementTable[i][1];\n  }\n  return value;\n}\nfunction _revivePrimitiveValues(value) {\n  for (var i = 0; i < replacementTable.length; ++i) {\n    // @ts-ignore\n    if (replacementTable[i][1] === value) return replacementTable[i][0];\n  }\n  return value;\n}\nfunction anyToString(value, replacer) {\n  return JSON.stringify(value, (key, value) => {\n    var updatedValue = _replacePrimitiveValues(value);\n    return replacer ? replacer(key, updatedValue) : updatedValue;\n  });\n}\nfunction anyToBytes(value, replacer) {\n  return stringToBytes(anyToString(value, replacer));\n}\nfunction bytesToAny(bytes, reviver) {\n  var text = bytesToString(bytes);\n  return JSON.parse(text, (key, value) => {\n    var updatedValue = _revivePrimitiveValues(value);\n    return reviver ? reviver(key, updatedValue) : updatedValue;\n  });\n}\n\n\n//# sourceMappingURL=dataConvertUtil.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/dataConvertUtil.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/index.mjs":
/*!**********************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/index.mjs ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"changeCredentialsAndReEncrypt\": () => (/* binding */ changeCredentialsAndReEncrypt),\n/* harmony export */   \"close\": () => (/* binding */ close),\n/* harmony export */   \"dangerouslyDeInitialize\": () => (/* binding */ dangerouslyDeInitialize),\n/* harmony export */   \"decryptBytes\": () => (/* binding */ decryptBytes),\n/* harmony export */   \"decryptObject\": () => (/* binding */ decryptObject),\n/* harmony export */   \"encryptBytes\": () => (/* binding */ encryptBytes),\n/* harmony export */   \"encryptObject\": () => (/* binding */ encryptObject),\n/* harmony export */   \"isInitialized\": () => (/* binding */ isInitialized),\n/* harmony export */   \"open\": () => (/* binding */ open)\n/* harmony export */ });\n/* harmony import */ var _virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./_virtual/_rollupPluginBabelHelpers.mjs */ \"../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs\");\n/* harmony import */ var _keyGen_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./keyGen.mjs */ \"../../packages/web-enc-at-rest/build/lib/keyGen.mjs\");\n/* harmony import */ var _appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./appDataEncryption.mjs */ \"../../packages/web-enc-at-rest/build/lib/appDataEncryption.mjs\");\n/* harmony import */ var _keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keyGenStore.mjs */ \"../../packages/web-enc-at-rest/build/lib/keyGenStore.mjs\");\n/* harmony import */ var _WearContext_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./WearContext.mjs */ \"../../packages/web-enc-at-rest/build/lib/WearContext.mjs\");\n/* harmony import */ var _dataConvertUtil_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./dataConvertUtil.mjs */ \"../../packages/web-enc-at-rest/build/lib/dataConvertUtil.mjs\");\n/* harmony import */ var _base64Util_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./base64Util.mjs */ \"../../packages/web-enc-at-rest/build/lib/base64Util.mjs\");\n\n\n\n\n\n\n\n\n/** Checks to see if a context was previously opened via open(). This can be useful\n *  to present appropriate UI in the app for either request existing credentials (e.g. \"log in\") or\n *  accept new credentials (e.g. \"create account\").\n *\n * @global\n * \n * @return {boolean} True if context was previously opened, or false if not. */\nfunction isInitialized() {\n  return (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.getCredentialProof)() !== null;\n}\n\n/** Clears any information used to verify credentials or generate credential keys. Read the warning below before \n *  calling this.\n *  \n *  WARNING: After this call, you won't be able to generate the same key from credentials. If you've got user data\n *  encrypted with it, that data will be bricked.\n *  \n *  @global */\nfunction dangerouslyDeInitialize() {\n  (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setCredentialProof)(null);\n  (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setDeriveKeySalt)(null);\n}\n\n/* @typedef {object} WearContext */\n\n/**\n * @callback ReEncryptCallback\n * \n * @async\n * \n * Callback function to app-supplied re-encryption logic. In your implementation, you will want to\n * re-encrypt all data you previously encrypted and save it in persistent storage. If any part of this\n * fails, you should roll the data back to its previous state of being encrypted with the old context.\n * \n * @param {WearContext} oldContext - Context under which app data is currently encrypted.\n * @param {WearContext} newContext - Context to use for re-encrypted app data.\n * @return {Promise<boolean>} Promise that resolves to true if function successfully re-encrypted app data. False, false if not.\n *                            In the latter case, roll back any changes to persistent storage avoid bricking user data.\n */\n\n/** Returns a context derived from new credentials and calls a specified callback that will perform re-encryption.\n *  The function's logic is meant as a safeguard to avoid bricking user data when credentials change. If app code\n *  follows implementation instructions, this function will succeed or fail atomically, leaving user data in an\n *  accessible state.\n *\n *  @async\n *\n *  @param {WearContext} oldContext         Context containing key under which data is currently encrypted. oldContext will be closed\n *                                          and be unusable if this function returns successfully.\n *  @param {string} newUserName             New user name, which would commonly be the same as previous user name, but doesn't have to be.\n *  @param {string} newPassword             Along with new user name, this comprises the credentials from which a new key will be derived.\n *  @param {ReEncryptCallback} onReEncrypt  Callback to app-supplied function which will perform re-encryption of user data.\n *  @return {Promise<WearContext>}          Promise resolving to new context generated from new credentials if everything was successful. */\nfunction changeCredentialsAndReEncrypt(_x, _x2, _x3, _x4) {\n  return _changeCredentialsAndReEncrypt.apply(this, arguments);\n}\n\n/** Returns a context that is needed for passing to other APIs or null if passed credentials are incorrect.\n *\n *  A natural time to call this is right after user has entered credentials and you've successfully performed any\n *  authentication that your app requires. open() is idempotent and you can call it multiple times.\n *  \n *  @async\n *\n *  @param {string} userName        Uniquely identifies user.\n *  @param {string} password        Password for user.\n *  @returns {Promise<WearContext>} Promise resolving to context that can be passed to other APIs. Treat this opaquely. \n *                                  DO NOT store in any place but memory. */\nfunction _changeCredentialsAndReEncrypt() {\n  _changeCredentialsAndReEncrypt = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (oldContext, newUserName, newPassword, onReEncrypt) {\n    if (oldContext.isClear()) throw Error('oldContext is unusable because it was closed.');\n    var newCredentialKey = yield (0,_keyGen_mjs__WEBPACK_IMPORTED_MODULE_2__.generateCredentialKey)(newUserName, newPassword);\n    var newContext = new _WearContext_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"](newCredentialKey);\n    var newCredentialProof = yield (0,_keyGen_mjs__WEBPACK_IMPORTED_MODULE_2__.generateCredentialProof)(newCredentialKey);\n    if (!(yield onReEncrypt(oldContext, newContext))) throw Error('Re-encryption failed. The current context has not been changed.');\n    oldContext.clear();\n    (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setCredentialProof)(newCredentialProof);\n    return newContext;\n  });\n  return _changeCredentialsAndReEncrypt.apply(this, arguments);\n}\nfunction open(_x5, _x6) {\n  return _open.apply(this, arguments);\n}\n\n/** Prevent any further encryption/decryption with the passed-in context. Useful for preventing attacks based on \n *  physical access to the user's device, e.g. user leaves browser open on an unlocked, unattended laptop.\n *\n *  A natural time to call this is whenever a user logs out. If you generated multiple contexts that\n *  were stored in separate variables, then call `close()` on each. If the user closes the tab or browser before \n *  you can call open(), there is no risk as the context is already cleared from memory.\n * \n * @param {WearContext} context  From a previous call to open(). */\nfunction _open() {\n  _open = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (userName, password) {\n    var credentialKey = yield (0,_keyGen_mjs__WEBPACK_IMPORTED_MODULE_2__.generateCredentialKey)(userName, password);\n    if (!(yield (0,_keyGen_mjs__WEBPACK_IMPORTED_MODULE_2__.matchOrCreateCredentialProof)(credentialKey))) return null;\n    return new _WearContext_mjs__WEBPACK_IMPORTED_MODULE_3__[\"default\"](credentialKey);\n  });\n  return _open.apply(this, arguments);\n}\nfunction close(context) {\n  context.clear();\n}\n\n/** Encrypts byte array to a string that you can use for writing to persistent storage.\n * \n * @async\n *\n * @param {WearContext} context From a previous call to open().\n * @param {Uint8Array} bytes    Value to encrypt.\n * @return {Promise<string>}    Promise resolving to base64-encoded string of encrypted data. */\nfunction encryptBytes(_x7, _x8) {\n  return _encryptBytes.apply(this, arguments);\n}\n\n/** Decrypts string to a byte array.\n * \n * @async\n *\n *  @param {WearContext} context   From a previous call to open(). The credentials that generated the context must match\n *                                 credentials provided earlier in session where encryptedData was encrypted.\n *  @param {string} encryptedData  Must have been generated with a previous call to `encryptBytes()`.\n *  @return {Promise<Uint8Array>}  Promise resolving to Unencrypted data. */\nfunction _encryptBytes() {\n  _encryptBytes = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (context, bytes) {\n    if (context.isClear()) throw Error('Attempted to use a closed context.');\n    var credentialKey = context.dangerouslyGetKey();\n    return (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_4__.bytesToBase64)(yield (0,_appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__.encryptAppData)(credentialKey, bytes));\n  });\n  return _encryptBytes.apply(this, arguments);\n}\nfunction decryptBytes(_x9, _x10) {\n  return _decryptBytes.apply(this, arguments);\n}\n\n/** Encrypts object to a ciphertext string that you can use for writing to persistent storage.\n *\n *  If the object is not entirely representable in JSON, you'll need to pass a replacer function to handle\n *  serialization, and pass a reviver function later to `decryptObject()` to symmetrically perform deserialization.\n *  To understand if your object is JSON-representable, call `JSON.parse(JSON.stringify(yourObject))` and see if it\n *  returns the same `yourObject` value.\n *\n *  WEaR adds support for (de)serializing the following primitive values: null, Infinity, -Infinity, and NaN.\n *\n *  @async\n * \n *  @param {WearContext} context From a previous call to open().\n *  @param {object} object       Value to encrypt.\n *  @param {function} replacer   Optional function to serialize values correctly. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify#the_replacer_parameter\n *  @return {Promise<string>}    Promise resolving to ciphertext string. */\nfunction _decryptBytes() {\n  _decryptBytes = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (context, encryptedData) {\n    if (context.isClear()) throw Error('Attempted to use a closed context.');\n    var credentialKey = context.dangerouslyGetKey();\n    var ciphertextBytes = (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_4__.base64ToBytes)(encryptedData);\n    return yield (0,_appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__.decryptAppData)(credentialKey, ciphertextBytes);\n  });\n  return _decryptBytes.apply(this, arguments);\n}\nfunction encryptObject(_x11, _x12, _x13) {\n  return _encryptObject.apply(this, arguments);\n}\n\n/** Decrypts ciphertext string to an object.\n * \n *  If the object is not entirely representable in JSON, you'll need to pass a reviver function to handle\n *  deserialization that matches a replacer function previously passed to `encryptObject()` for the same data.\n *  To understand if your object is JSON-representable, call `JSON.parse(JSON.stringify(yourObject))` and see if it\n *  returns the same `yourObject` value.\n *\n *  WEaR adds support for (de)serializing the following primitive values: null, Infinity, -Infinity, and NaN.\n *\n *  @async\n *  \n *  @param {WearContext} context   From a previous call to open(). The credentials that generated the context must match\n *                                 credentials provided earlier in session where encryptedData was encrypted.\n *  @param {string} encryptedData  Must have been generated with a previous call to `encryptObject()`.\n *  @param {function} reviver      Optional function to deserialize values correctly. See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/parse#using_the_reviver_parameter\n *  @return {Promise<object>}      Promise resolving to Unencrypted data. */\nfunction _encryptObject() {\n  _encryptObject = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (context, object, replacer) {\n    var plainTextBytes = (0,_dataConvertUtil_mjs__WEBPACK_IMPORTED_MODULE_6__.anyToBytes)(object, replacer);\n    return yield encryptBytes(context, plainTextBytes);\n  });\n  return _encryptObject.apply(this, arguments);\n}\nfunction decryptObject(_x14, _x15, _x16) {\n  return _decryptObject.apply(this, arguments);\n}\nfunction _decryptObject() {\n  _decryptObject = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_1__.asyncToGenerator)(function* (context, encryptedData, reviver) {\n    var plainTextBytes = yield decryptBytes(context, encryptedData);\n    return (0,_dataConvertUtil_mjs__WEBPACK_IMPORTED_MODULE_6__.bytesToAny)(plainTextBytes, reviver);\n  });\n  return _decryptObject.apply(this, arguments);\n}\n\n\n//# sourceMappingURL=index.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/index.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/keyGen.mjs":
/*!***********************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/keyGen.mjs ***!
  \***********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"generateCredentialKey\": () => (/* binding */ generateCredentialKey),\n/* harmony export */   \"generateCredentialProof\": () => (/* binding */ generateCredentialProof),\n/* harmony export */   \"getOrCreateDeriveKeySalt\": () => (/* binding */ getOrCreateDeriveKeySalt),\n/* harmony export */   \"matchOrCreateCredentialProof\": () => (/* binding */ matchOrCreateCredentialProof)\n/* harmony export */ });\n/* harmony import */ var _virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./_virtual/_rollupPluginBabelHelpers.mjs */ \"../../packages/web-enc-at-rest/build/lib/_virtual/_rollupPluginBabelHelpers.mjs\");\n/* harmony import */ var _protectedCrypto_mjs__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./protectedCrypto.mjs */ \"../../packages/web-enc-at-rest/build/lib/protectedCrypto.mjs\");\n/* harmony import */ var _randomUtil_mjs__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./randomUtil.mjs */ \"../../packages/web-enc-at-rest/build/lib/randomUtil.mjs\");\n/* harmony import */ var _dataConvertUtil_mjs__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./dataConvertUtil.mjs */ \"../../packages/web-enc-at-rest/build/lib/dataConvertUtil.mjs\");\n/* harmony import */ var _keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./keyGenStore.mjs */ \"../../packages/web-enc-at-rest/build/lib/keyGenStore.mjs\");\n/* harmony import */ var _arrayUtil_mjs__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./arrayUtil.mjs */ \"../../packages/web-enc-at-rest/build/lib/arrayUtil.mjs\");\n/* harmony import */ var _appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./appDataEncryption.mjs */ \"../../packages/web-enc-at-rest/build/lib/appDataEncryption.mjs\");\n\n\n\n\n\n\n\n\n/** Explanation of salt reuse:\n \n The salt returned by getOrCreateDeriveKeySalt() is used along with the password to derive a key. It's nearly always true \n in cryptographic use cases that you would want to use a new salt value every time a value is encrypted. But in this \n use case, we want the same credentials to consistently derive the same key across multiple derivations. Otherwise, \n the key will always be a new key that is unusable for decrypting previously-encrypted app data.\n \n The derived key is only kept in-memory, which limits an attacker's ability to compare the derived key value against a\n matching value that could reveal credentials. An attacker could gain access to browser memory, e.g. the browser\n executable is patched with malware. But in this case, other attack vectors of greater opportunity will be available to\n the attacker.\n \n The app data itself is encrypted without reuse of salt/IV values.\n */\nvar PBKDF2_SALT_BYTE_LENGTH = 16;\nfunction getOrCreateDeriveKeySalt() {\n  var deriveKeySalt = (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.getDeriveKeySalt)();\n  if (!deriveKeySalt) {\n    deriveKeySalt = (0,_randomUtil_mjs__WEBPACK_IMPORTED_MODULE_1__.randomBytes)(PBKDF2_SALT_BYTE_LENGTH);\n    (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setDeriveKeySalt)(deriveKeySalt);\n  }\n  return deriveKeySalt;\n}\nfunction _addUserNameToSalt(userName, salt) {\n  var saltI = 0,\n    saltLength = salt.length;\n  for (var i = 0; i < userName.length; ++i) {\n    // @ts-ignore\n    salt[saltI] = (salt[saltI] + userName.charCodeAt(i)) % 256;\n    if (++saltI === saltLength) saltI = 0;\n  }\n}\nvar DERIVE_KEY_ITERATIONS = 100000;\nfunction _generateCredentialKeyBytes(_x, _x2, _x3) {\n  return _generateCredentialKeyBytes2.apply(this, arguments);\n}\nfunction _generateCredentialKeyBytes2() {\n  _generateCredentialKeyBytes2 = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.asyncToGenerator)(function* (subtle, userName, password) {\n    var salt = getOrCreateDeriveKeySalt();\n    _addUserNameToSalt(userName, salt);\n    var passphraseUint8 = (0,_dataConvertUtil_mjs__WEBPACK_IMPORTED_MODULE_3__.stringToBytes)(password);\n    var algorithmParams = {\n      name: 'PBKDF2',\n      hash: 'SHA-256',\n      salt,\n      iterations: DERIVE_KEY_ITERATIONS\n    };\n    var baseKey = yield subtle.importKey('raw', passphraseUint8, 'PBKDF2', false, ['deriveKey']);\n    var derivedParams = {\n      name: 'AES-GCM',\n      length: 128\n    };\n    var credentialKey = yield subtle.deriveKey(algorithmParams, baseKey, derivedParams, true, ['decrypt', 'encrypt']);\n    return new Uint8Array(yield subtle.exportKey('raw', credentialKey));\n  });\n  return _generateCredentialKeyBytes2.apply(this, arguments);\n}\nfunction generateCredentialKey(_x4, _x5) {\n  return _generateCredentialKey.apply(this, arguments);\n}\nfunction _generateCredentialKey() {\n  _generateCredentialKey = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.asyncToGenerator)(function* (userName, password) {\n    var subtle = (0,_protectedCrypto_mjs__WEBPACK_IMPORTED_MODULE_4__.getSubtle)();\n    var keyBytes = yield _generateCredentialKeyBytes(subtle, userName, password);\n    return yield subtle.importKey('raw', keyBytes, 'AES-GCM', false, ['decrypt', 'encrypt']);\n  });\n  return _generateCredentialKey.apply(this, arguments);\n}\nfunction _createCredentialProofPlainText() {\n  var proof = new Uint8Array(256);\n  for (var i = 0; i < 256; ++i) {\n    proof[i] = i;\n  }\n  return proof;\n}\nvar CREDENTIAL_PROOF_PLAINTEXT = _createCredentialProofPlainText();\nfunction generateCredentialProof(_x6) {\n  return _generateCredentialProof.apply(this, arguments);\n}\nfunction _generateCredentialProof() {\n  _generateCredentialProof = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.asyncToGenerator)(function* (credentialKey) {\n    return (0,_appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__.encryptAppData)(credentialKey, CREDENTIAL_PROOF_PLAINTEXT);\n  });\n  return _generateCredentialProof.apply(this, arguments);\n}\nfunction matchOrCreateCredentialProof(_x7) {\n  return _matchOrCreateCredentialProof.apply(this, arguments);\n}\nfunction _matchOrCreateCredentialProof() {\n  _matchOrCreateCredentialProof = (0,_virtual_rollupPluginBabelHelpers_mjs__WEBPACK_IMPORTED_MODULE_2__.asyncToGenerator)(function* (credentialKey) {\n    var credentialProof = (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.getCredentialProof)();\n    if (credentialProof === null) {\n      // Store new proof if there isn't already one.\n      var newCredentialProof = yield generateCredentialProof(credentialKey);\n      (0,_keyGenStore_mjs__WEBPACK_IMPORTED_MODULE_0__.setCredentialProof)(newCredentialProof);\n      return true;\n    }\n    try {\n      // Otherwise, need to verify the proof value can be decrypted.\n      var credentialProofPlaintext = yield (0,_appDataEncryption_mjs__WEBPACK_IMPORTED_MODULE_5__.decryptAppData)(credentialKey, credentialProof);\n      return (0,_arrayUtil_mjs__WEBPACK_IMPORTED_MODULE_6__.areUint8ArraysEqual)(credentialProofPlaintext, CREDENTIAL_PROOF_PLAINTEXT);\n    } catch (ignored) {\n      // If credentials are incorrect, decrypt will fail.\n      return false;\n    }\n  });\n  return _matchOrCreateCredentialProof.apply(this, arguments);\n}\n\n\n//# sourceMappingURL=keyGen.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/keyGen.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/keyGenStore.mjs":
/*!****************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/keyGenStore.mjs ***!
  \****************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getCredentialProof\": () => (/* binding */ getCredentialProof),\n/* harmony export */   \"getDeriveKeySalt\": () => (/* binding */ getDeriveKeySalt),\n/* harmony export */   \"setCredentialProof\": () => (/* binding */ setCredentialProof),\n/* harmony export */   \"setDeriveKeySalt\": () => (/* binding */ setDeriveKeySalt)\n/* harmony export */ });\n/* harmony import */ var _base64Util_mjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./base64Util.mjs */ \"../../packages/web-enc-at-rest/build/lib/base64Util.mjs\");\n\n\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\nvar WEAR_PREFIX = 'WEAR_keyGen_';\nvar DERIVE_KEY_SALT = WEAR_PREFIX + \"deriveKeySalt\";\nvar CREDENTIAL_PROOF = WEAR_PREFIX + \"credentialProof\";\nfunction getDeriveKeySalt() {\n  var value = globalThis.localStorage.getItem(DERIVE_KEY_SALT);\n  return value === null ? null : (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_0__.base64ToBytes)(value);\n}\nfunction setDeriveKeySalt(deriveKeySalt) {\n  if (deriveKeySalt === null) {\n    globalThis.localStorage.removeItem(DERIVE_KEY_SALT);\n    return;\n  }\n  globalThis.localStorage.setItem(DERIVE_KEY_SALT, (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64)(deriveKeySalt));\n}\nfunction getCredentialProof() {\n  var value = globalThis.localStorage.getItem(CREDENTIAL_PROOF);\n  return value === null ? null : (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_0__.base64ToBytes)(value);\n}\nfunction setCredentialProof(credentialProof) {\n  if (credentialProof === null) {\n    globalThis.localStorage.removeItem(CREDENTIAL_PROOF);\n    return;\n  }\n  globalThis.localStorage.setItem(CREDENTIAL_PROOF, (0,_base64Util_mjs__WEBPACK_IMPORTED_MODULE_0__.bytesToBase64)(credentialProof));\n}\n\n\n//# sourceMappingURL=keyGenStore.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/keyGenStore.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/protectedCrypto.mjs":
/*!********************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/protectedCrypto.mjs ***!
  \********************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"getSubtle\": () => (/* binding */ getSubtle)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\n/* Returns the crypto.subtle instance after verifying it has all methods needed. By design, this function will never \n   polyfill. The implementor of app code can choose to polyfill before this function is called, and great care is \n   recommending in choosing any polyfills. */\nfunction getSubtle() {\n  var subtle = globalThis.crypto && globalThis.crypto.subtle;\n  if (!subtle) throw Error('Browser does not implement Web Crypto.');\n  if (!subtle.importKey || !subtle.deriveKey || !subtle.decrypt || !subtle.encrypt || !subtle.exportKey) throw Error('Web Crypto on this browser does not implement required APIs.');\n  return subtle;\n}\n\n\n//# sourceMappingURL=protectedCrypto.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/protectedCrypto.mjs?");

/***/ }),

/***/ "../../packages/web-enc-at-rest/build/lib/randomUtil.mjs":
/*!***************************************************************!*\
  !*** ../../packages/web-enc-at-rest/build/lib/randomUtil.mjs ***!
  \***************************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"randomBytes\": () => (/* binding */ randomBytes)\n/* harmony export */ });\n/*\nMIT License\n\nCopyright (c) 2022 Erik Hermansen\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n*/\n\nfunction randomBytes(byteLength) {\n  return globalThis.crypto.getRandomValues(new Uint8Array(byteLength));\n}\n\n\n//# sourceMappingURL=randomUtil.mjs.map\n\n\n//# sourceURL=webpack://example/../../packages/web-enc-at-rest/build/lib/randomUtil.mjs?");

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
/******/ 	
/******/ 	// startup
/******/ 	// Load entry module and return exports
/******/ 	// This entry module can't be inlined because the eval devtool is used.
/******/ 	var __webpack_exports__ = __webpack_require__("./src/index.js");
/******/ 	
/******/ })()
;